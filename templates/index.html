<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
</head>

<body>
    <div><img src="/static/img/princess.jpg"></div>
    <div id="talk" name="talk"></div>
    <iframe src="" id="gtts" name="gtts" style="display: none; width:1px; height: 1px;"></iframe>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.4.0/annyang.min.js"></script>
<script>
//https://www.talater.com/annyang/
//https://github.com/TalAter/SpeechKITT
//https://github.com/TalAter/annyang/blob/master/docs/README.md

function call_tts(text){
    $("#gtts")[0].src = "/gtts?text="+ text;
    $("#talk").text(text);
}

window.onload = function() {
    if (annyang) {
        var commandsDefault = {
            '*talk': function(talk) {
                call_tts(talk);
            }
        };
        var commands = {
            '일어나 :userName야': function(userName) {
                call_tts(userName + ' 일어났습니다.');
            }
        };
        annyang.setLanguage("ko");
        annyang.addCommands(commandsDefault);
        annyang.addCommands(commands);
        annyang.debug(true);
        annyang.start();
    }
}

</script>

</html>
